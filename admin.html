<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>mObywatel - Ustawienia Admina</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); min-height: 100vh; padding: 20px; }
        .admin-container { max-width: 800px; margin: 0 auto; background: white; border-radius: 15px; padding: 30px; box-shadow: 0 20px 60px rgba(0,0,0,0.1); }
        .admin-header { text-align: center; margin-bottom: 30px; padding-bottom: 20px; border-bottom: 2px solid #f0f0f0; }
        .admin-title { color: #333; font-size: 28px; font-weight: bold; margin-bottom: 10px; }
        .admin-subtitle { color: #666; font-size: 16px; }
        .auth-section { text-align: center; margin-bottom: 30px; }
        .auth-input { padding: 12px 20px; font-size: 16px; border: 2px solid #ddd; border-radius: 8px; margin: 0 10px; width: 200px; }
        .auth-button { padding: 12px 24px; background: #007bff; color: white; border: none; border-radius: 8px; cursor: pointer; font-size: 16px; font-weight: bold; transition: background 0.3s ease; }
        .auth-button:hover { background: #0056b3; }
        .settings-section { display: none; }
        .form-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 20px; }
        .form-group { display: flex; flex-direction: column; }
        .form-group label { font-weight: bold; color: #333; margin-bottom: 5px; font-size: 14px; }
        .form-group input, .form-group select { padding: 10px; border: 2px solid #ddd; border-radius: 6px; font-size: 14px; transition: border-color 0.3s ease; }
        .form-group input:focus, .form-group select:focus { outline: none; border-color: #007bff; }
        .full-width { grid-column: 1 / -1; }
        .action-buttons { text-align: center; margin-top: 30px; padding-top: 20px; border-top: 2px solid #f0f0f0; }
        .save-button { padding: 15px 30px; background: #28a745; color: white; border: none; border-radius: 8px; cursor: pointer; font-size: 16px; font-weight: bold; margin: 0 10px; transition: background 0.3s ease; position: relative; }
        .save-button:hover { background: #1e7e34; }
        .save-button:disabled { background: #6c757d; cursor: not-allowed; }
        .preview-button { padding: 15px 30px; background: #17a2b8; color: white; border: none; border-radius: 8px; cursor: pointer; font-size: 16px; font-weight: bold; margin: 0 10px; transition: background 0.3s ease; }
        .preview-button:hover { background: #138496; }
        .success-message { background: #d4edda; color: #155724; padding: 15px 20px; border-radius: 8px; margin: 15px 0; display: none; border-left: 4px solid #28a745; }
        .error-message { background: #f8d7da; color: #721c24; padding: 15px 20px; border-radius: 8px; margin: 15px 0; display: none; border-left: 4px solid #dc3545; }
        .code-output { background: #f8f9fa; border: 1px solid #ddd; padding: 15px; border-radius: 6px; margin: 15px 0; font-family: monospace; font-size: 12px; white-space: pre-wrap; max-height: 300px; overflow-y: auto; }
        .instructions { background: #e7f3ff; border-left: 4px solid #007bff; padding: 15px; margin: 20px 0; border-radius: 6px; }
        .vercel-note { background: #fff3cd; border-left: 4px solid #ffc107; padding: 15px; margin: 20px 0; border-radius: 6px; }
        @media (max-width: 768px) { .form-grid { grid-template-columns: 1fr; } }
    </style>
</head>
<body>
    <div class="admin-container">
        <div class="admin-header">
            <h1 class="admin-title">üîß Panel Administratora</h1>
            <p class="admin-subtitle">Vercel-Compatible Solution - Generuje kod do rƒôcznej aktualizacji</p>
        </div>

        <div class="vercel-note">
            <h3>üìù Dla Vercel:</h3>
            <p>Ten system generuje kod JavaScript, kt√≥ry kopiujesz do pliku <code>global-data.js</code>. Dzia≈Ça na Vercel bez PHP!</p>
        </div>

        <div class="auth-section" id="authSection">
            <p style="margin-bottom: 15px; color: #666;">Wprowad≈∫ has≈Ço administratora:</p>
            <input type="password" id="adminPassword" class="auth-input" placeholder="Has≈Ço">
            <button onclick="authenticate()" class="auth-button">Zaloguj</button>
            <div id="authError" class="error-message"></div>
        </div>

        <div class="settings-section" id="settingsSection">
            <form id="globalSettingsForm">
                <div class="form-grid">
                    <div class="form-group"><label for="name">Imiƒô (imiona)</label><input type="text" id="name" name="name"></div>
                    <div class="form-group"><label for="surname">Nazwisko</label><input type="text" id="surname" name="surname"></div>
                    <div class="form-group"><label for="nationality">Obywatelstwo</label><input type="text" id="nationality" name="nationality"></div>
                    <div class="form-group"><label for="birthday">Data urodzenia (DD.MM.YYYY)</label><input type="text" id="birthday" name="birthday"></div>
                    <div class="form-group"><label for="pesel">Numer PESEL</label><input type="text" id="pesel" name="pesel"></div>
                    <div class="form-group"><label for="sex">P≈Çeƒá</label><select id="sex" name="sex"><option value="Mƒô≈ºczyzna">Mƒô≈ºczyzna</option><option value="Kobieta">Kobieta</option></select></div>
                    <div class="form-group"><label for="familyName">Nazwisko rodowe</label><input type="text" id="familyName" name="familyName"></div>
                    <div class="form-group"><label for="fathersFamilyName">Nazwisko rodowe ojca</label><input type="text" id="fathersFamilyName" name="fathersFamilyName"></div>
                    <div class="form-group"><label for="mothersFamilyName">Nazwisko rodowe matki</label><input type="text" id="mothersFamilyName" name="mothersFamilyName"></div>
                    <div class="form-group"><label for="birthPlace">Miejsce urodzenia</label><input type="text" id="birthPlace" name="birthPlace"></div>
                    <div class="form-group"><label for="countryOfBirth">Kraj urodzenia</label><input type="text" id="countryOfBirth" name="countryOfBirth"></div>
                    <div class="form-group"><label for="mothersName">Imiƒô matki</label><input type="text" id="mothersName" name="mothersName"></div>
                    <div class="form-group"><label for="fathersName">Imiƒô ojca</label><input type="text" id="fathersName" name="fathersName"></div>
                    <div class="form-group"><label for="seriesAndNumber">Seria i numer dowodu</label><input type="text" id="seriesAndNumber" name="seriesAndNumber"></div>
                    <div class="form-group"><label for="givenDate">Data wydania</label><input type="text" id="givenDate" name="givenDate"></div>
                    <div class="form-group"><label for="expiryDate">Data wyga≈õniƒôcia</label><input type="text" id="expiryDate" name="expiryDate"></div>
                    <div class="form-group full-width"><label for="adress1">Ulica i numer domu</label><input type="text" id="adress1" name="adress1"></div>
                    <div class="form-group"><label for="adress2">Kod pocztowy</label><input type="text" id="adress2" name="adress2"></div>
                    <div class="form-group"><label for="city">Miasto</label><input type="text" id="city" name="city"></div>
                    <div class="form-group full-width"><label for="image">Link do zdjƒôcia (Imgur)</label><input type="text" id="image" name="image"></div>
                </div>

                <div class="action-buttons">
                    <button type="button" onclick="generateVercelCode()" class="save-button">
                        üöÄ Wygeneruj kod dla Vercel
                    </button>
                    <button type="button" onclick="previewCard()" class="preview-button">üëÅÔ∏è PodglƒÖd karty</button>
                </div>

                <div id="successMessage" class="success-message"></div>
                <div id="errorMessage" class="error-message"></div>

                <div class="instructions" id="instructions" style="display: none;">
                    <h3>üìù Instrukcja dla Vercel:</h3>
                    <p><strong>Krok 1:</strong> Skopiuj ca≈Çy kod poni≈ºej (Ctrl+A, Ctrl+C)</p>
                    <p><strong>Krok 2:</strong> Otw√≥rz plik <code>global-data.js</code> w edytorze</p>
                    <p><strong>Krok 3:</strong> ZastƒÖp ca≈ÇƒÖ zawarto≈õƒá pliku skopiowanym kodem</p>
                    <p><strong>Krok 4:</strong> Zapisz i wdr√≥≈º na Vercel - dane bƒôdƒÖ widoczne na wszystkich urzƒÖdzeniach!</p>
                </div>

                <div id="generatedCode" class="code-output" style="display: none;"></div>
            </form>
        </div>
    </div>

    <script>
        const ADMIN_PASSWORD = 'admin123'; // Change this!

        function authenticate() {
            const password = document.getElementById('adminPassword').value;
            const errorDiv = document.getElementById('authError');
            if (password === ADMIN_PASSWORD) {
                document.getElementById('authSection').style.display = 'none';
                document.getElementById('settingsSection').style.display = 'block';
                loadCurrentSettings();
            } else {
                errorDiv.style.display = 'block';
                errorDiv.textContent = 'Nieprawid≈Çowe has≈Ço!';
            }
        }

        function loadCurrentSettings() {
            if (typeof window.globalCardData !== 'undefined') {
                const data = window.globalCardData;
                Object.keys(data).forEach(key => {
                    const element = document.getElementById(key);
                    if (element) element.value = data[key] || '';
                });
            }
        }

        function generateVercelCode() {
            const form = document.getElementById('globalSettingsForm');
            const formData = new FormData(form);
            const globalData = {};

            for (let [key, value] of formData.entries()) {
                globalData[key] = value;
            }

            globalData.adress = (globalData.adress1 || '') + ' ' + (globalData.adress2 || '') + ', ' + (globalData.city || '');
            globalData.timestamp = new Date().toISOString();

            // Generate the JavaScript code for Vercel
            const fileContent = `// Global data - updated for Vercel deployment
// Copy this entire code and replace the contents of global-data.js
window.globalCardData = {
    image: "${escapeString(globalData.image || '')}",
    name: "${escapeString(globalData.name || '')}",
    surname: "${escapeString(globalData.surname || '')}", 
    nationality: "${escapeString(globalData.nationality || '')}",
    familyName: "${escapeString(globalData.familyName || '')}",
    fathersFamilyName: "${escapeString(globalData.fathersFamilyName || '')}", 
    mothersFamilyName: "${escapeString(globalData.mothersFamilyName || '')}",
    birthPlace: "${escapeString(globalData.birthPlace || '')}",
    countryOfBirth: "${escapeString(globalData.countryOfBirth || '')}",
    adress1: "${escapeString(globalData.adress1 || '')}",
    adress2: "${escapeString(globalData.adress2 || '')}", 
    city: "${escapeString(globalData.city || '')}",
    mothersName: "${escapeString(globalData.mothersName || '')}",
    fathersName: "${escapeString(globalData.fathersName || '')}",
    givenDate: "${escapeString(globalData.givenDate || '')}",
    expiryDate: "${escapeString(globalData.expiryDate || '')}", 
    seriesAndNumber: "${escapeString(globalData.seriesAndNumber || '')}",
    birthday: "${escapeString(globalData.birthday || '')}",
    sex: "${escapeString(globalData.sex || '')}",
    pesel: "${escapeString(globalData.pesel || '')}",
    adress: "${escapeString(globalData.adress || '')}",
    timestamp: "${globalData.timestamp}"
};

console.log('Global card data loaded:', window.globalCardData);`;

            document.getElementById('generatedCode').textContent = fileContent;
            document.getElementById('generatedCode').style.display = 'block';
            document.getElementById('instructions').style.display = 'block';

            showMessage('success', '‚úÖ Kod zosta≈Ç wygenerowany dla Vercel! Skopiuj go i wklej do pliku global-data.js');
        }

        function escapeString(str) {
            return str.replace(/\\/g, '\\\\').replace(/"/g, '\\"');
        }

        function previewCard() {
            window.open('card.html', '_blank');
        }

        function showMessage(type, text) {
            const successDiv = document.getElementById('successMessage');
            const errorDiv = document.getElementById('errorMessage');
            if (type === 'success') {
                successDiv.style.display = 'block';
                successDiv.innerHTML = text;
                errorDiv.style.display = 'none';
            } else {
                errorDiv.style.display = 'block';
                errorDiv.innerHTML = text;
                successDiv.style.display = 'none';
            }
            setTimeout(() => {
                successDiv.style.display = 'none';
                errorDiv.style.display = 'none';
            }, 10000);
        }

        document.getElementById('adminPassword').addEventListener('keypress', function(e) {
            if (e.key === 'Enter') authenticate();
        });
    </script>

    <script src="global-data.js"></script>
</body>
</html>
